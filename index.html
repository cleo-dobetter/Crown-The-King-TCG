<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crown The King</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="start-screen">
        <div class="start-buttons">
            <button class="btn-start" onclick="startGame()">MATCH</button>
            <button class="btn-start" onclick="openSkills()">SKILLS</button>
            <button class="btn-start" onclick="openRules()">RULES</button>
            
        </div>
    </div>

    <div id="rules-menu" class="hidden">
        <div id="menu-box">
            <h2>GAME INFO</h2>
            <div class="menu-buttons">
                <button onclick="alert('Manual coming soon!')">READ RULES</button>
                <button onclick="startTutorial()">PLAY TUTORIAL</button>
                <button onclick="closeRulesMenu()" class="btn-danger">BACK</button>
            </div>
        </div>
    </div>

    <div id="tutorial-overlay" class="hidden">
        <div class="tutorial-box">
            <p id="tut-text">Welcome to Crown The King.</p>
            <button id="tut-btn" onclick="nextTutorialStep()">CONTINUE</button>
        </div>
    </div>

    <div id="skills-overlay" class="hidden">
        <div class="skills-container">
            <div class="skills-header">
                <h2>CHOOSE YOUR SKILLS</h2>
            </div>
            <div class="builder-layout">
                <div class="card-shop">
                    <div class="points-bar"><span id="points-val">0</span> / 15</div>
                    <div id="shop-grid" class="shop-grid"></div>
                </div>
                <div class="deck-info-panel">
                    <div class="card-preview">
                        <div class="preview-text">
                            <h4 id="preview-name">Select a Card</h4>
                            <p id="preview-desc">Click a card to see details.</p>
                            <p id="preview-cost" style="color:var(--accent)">Cost: -</p>
                        </div>
                    </div>
                    <div class="current-deck">
                        <h3>YOUR DECK (<span id="deck-count">0</span> cards)</h3>
                        <ul id="deck-list"></ul>
                    </div>
                </div>
            </div>
            <div class="skills-footer">
                <button class="btn-confirm" onclick="closeSkills()">CONFIRM & EXIT</button>
            </div>
        </div>
    </div>

    <div id="video-overlay" class="hidden">
        <img id="game-gif" src="" alt="Special Move">
    </div>

    <div id="dev-overlay" class="hidden">
        <div id="dev-box">
            <h2>ANIMATION TESTER</h2>
            <div class="dev-stage">
                <div id="dev-slot" class="slot">
                    <div id="dev-card" class="card" style="background-image: url('images/cardbacks/cardback.png');"></div>
                </div>
            </div>
            <div class="dev-controls">
                <h3>Full Screen</h3>
                <button onclick="playGifAnimation('stallion.gif')">Play Stallion GIF</button>
                <h3>Slot Flashes</h3>
                <button onclick="testDevFlash('hit')">Hit (White)</button>
                <button onclick="testDevFlash('block')">Block (Blue)</button>
                <button onclick="testDevFlash('super')">Super (Red)</button>
                <h3>Card Death</h3>
                <button onclick="testDevDeath('destroy-std')">Standard</button>
                <button onclick="testDevDeath('destroy-fire')">Fire</button>
                <button onclick="testDevDeath('destroy-holy')">Holy</button>
            </div>
            <button class="btn-danger" onclick="closeDevMenu()" style="margin-top:20px; width:100%;">CLOSE</button>
        </div>
    </div>

    <div id="game-over-screen" class="hidden">
        <div class="game-over-box">
            <h1 id="go-title">VICTORY</h1>
            
            <div class="stats-grid">
                <div class="grid-header">
                    <span>STATISTIC</span>
                    <span>VALUE</span>
                    <span>POINTS</span>
                </div>

                <div class="grid-row">
                    <span class="label">Cards Left</span>
                    <span id="val-cards">0</span>
                    <span id="pts-cards" class="pts-plus">+0</span>
                </div>

                <div class="grid-row">
                    <span class="label">Attack Dmg Given</span>
                    <span id="val-atk-given">0</span>
                    <span id="pts-atk-given" class="pts-plus">+0</span>
                </div>
                <div class="grid-row">
                    <span class="label">Attack Dmg Taken</span>
                    <span id="val-atk-taken">0</span>
                    <span id="pts-atk-taken" class="pts-minus">-0</span>
                </div>

                <div class="grid-row">
                    <span class="label">Skills Used</span>
                    <span id="val-skl-used">0</span>
                    <span id="pts-skl-used" class="pts-plus">+0</span>
                </div>
                <div class="grid-row">
                    <span class="label">Skill Dmg Given</span>
                    <span id="val-skl-given">0</span>
                    <span id="pts-skl-given" class="pts-plus">+0</span>
                </div>
                <div class="grid-row">
                    <span class="label">Skill Dmg Taken</span>
                    <span id="val-skl-taken">0</span>
                    <span id="pts-skl-taken" class="pts-minus">-0</span>
                </div>

                <div class="grid-row">
                    <span class="label">Defense Dmg Given</span>
                    <span id="val-def-given">0</span>
                    <span id="pts-def-given" class="pts-plus">+0</span>
                </div>
                <div class="grid-row">
                    <span class="label">Defense Dmg Taken</span>
                    <span id="val-def-taken">0</span>
                    <span id="pts-def-taken" class="pts-minus">-0</span>
                </div>

                <div class="grid-row">
                    <span class="label">Sacrifices</span>
                    <span id="val-sac">0</span>
                    <span id="pts-sac" class="pts-plus">+0</span>
                </div>

                <div class="grid-row">
                    <span class="label">Time Bonus</span>
                    <span id="val-time">00:00</span>
                    <span id="pts-time" class="pts-plus">+0</span>
                </div>
            </div>
            
            <div class="score-box">
                <div class="score-label">FINAL SCORE</div>
                <div id="final-score">0</div>
            </div>

            <button class="btn-start" onclick="quitToTitleFromStats()">RETURN TO TITLE</button>
        </div>
    </div>

    <div id="top-bar" class="hidden">
        <div class="game-title">CROWN THE KING</div>
        <button id="btn-menu" onclick="toggleMenu()">☰ MENU</button>
    </div>

    <div id="menu-overlay" class="hidden">
        <div id="menu-box">
            <h2>PAUSE MENU</h2>
            <div class="menu-buttons">
                <button onclick="toggleMenu()">RESUME</button>
                <button onclick="openDeckView()">VIEW DECK</button>
                <button onclick="concedeGame()" class="btn-danger">SURRENDER</button>
                <button onclick="quitToTitle()">QUIT TO TITLE</button>
            </div>
            <div id="log-wrapper">
                <div id="log-header" onclick="toggleBattleLog()">
                    <span>BATTLE LOG</span>
                    <span id="log-arrow">▼</span>
                </div>
                <div id="log-content">
                    <ul id="game-log"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="deck-view-overlay" class="hidden">
        <div id="deck-box">
            <div class="deck-header">
                <h2>YOUR DECK</h2>
                <button onclick="closeDeckView()">X</button>
            </div>
            <div class="deck-legend">
                <span style="color:white">Bright = In Draw Pile</span> | 
                <span style="color:#777">Dark = In Hand/Played/Discarded</span>
            </div>
            <div id="deck-grid"></div>
        </div>
    </div>

    <div id="game-container" class="hidden">
        
        <div id="ai-zone">
            <div class="hp-box ai-hp">
                <div class="hp-label">ENEMY</div>
                <div class="hp-val" id="ai-hp">60</div>
            </div>
            <div id="ai-hand"></div>
        </div>

        <div id="game-board">
            <div class="row" id="ai-slots">
                <div class="slot" id="ai-0"></div>
                <div class="slot" id="ai-1"></div>
                <div class="slot" id="ai-2"></div>
            </div>
            <div class="row" id="p-slots">
                <div class="slot" id="p-0" onclick="clickSlot(0)"></div>
                <div class="slot" id="p-1" onclick="clickSlot(1)"></div>
                <div class="slot" id="p-2" onclick="clickSlot(2)"></div>
            </div>
        </div>

        <div id="player-zone">
            <div id="hand"></div>
            <div class="hp-box p-hp">
                <div class="hp-label">YOU</div>
                <div class="hp-val" id="p-hp">60</div>
            </div>
        </div>

        <div id="controls">
            <div id="selection-preview"></div>
            <div class="btn-group">
                <button id="btn-discard" onclick="discardCard()">DISCARD</button>
                <button id="btn-end" onclick="endTurn()">END TURN</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="tutorial.js"></script>
</body>
</html>
